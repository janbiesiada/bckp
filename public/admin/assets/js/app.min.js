function approvePost(a){a.preventDefault();var b=$(this).attr("data-pid"),c=$(this).parents("li");request_check||(request_check=!0,$.ajax({type:"POST",url:"/9gag-admin/submissions",data:{pid:b},success:function(a){a&&$(c).slideUp("fast").html("Post Approved").addClass("approved").fadeIn("slow"),request_check=!1}}))}function approveAdmin(a){a.preventDefault();var b=$(this).attr("data-userid");adminActions(this,b,"approve","approveAdmin")}function removeAdmin(a){a.preventDefault();var b=$(this).attr("data-userid");adminActions(this,b,"remove","removeAdmin")}function removeAdminAccess(a){a.preventDefault();var b=$(this).attr("data-userid");adminActions(this,b,"revoke","removeAdminAccess")}function adminActions(a,b,c){request_check||(request_check=!0,$.ajax({type:"POST",url:"/9gag-admin/manage",data:{action:c,admin:b},success:function(a){a&&window.top.location.reload(),request_check=!1}}))}function banUser(a){a.preventDefault();var b=$(this),c=$(this).attr("data-username"),d=confirm("Confirm Ban Action");d&&$.ajax({type:"POST",url:"/9gag-admin/ban",data:{username:c},success:function(a){a&&($(b).siblings().remove(),$(b).removeClass("btn-warning banuser").addClass("btn-success").text("User Banned Successll"))}})}function unBanUser(a){a.preventDefault();var b=$(this),c=$(this).attr("data-username"),d=confirm("Confirm UnBan Action");d&&$.ajax({type:"POST",url:"/9gag-admin/unban",data:{username:c},success:function(a){a&&($(b).siblings().remove(),$(b).removeClass("btn-primary unbanuser").addClass("btn-success").text("User Unban Successfull"))}})}function DeleteUser(a){a.preventDefault(),$(".details").remove();var b=$("#search-delete-username").val();if(!b.length>0)var c='<div class="details"><p class="error"> Enter Username Before Submission!</p>';else request_check||(request_check=!0,$.ajax({type:"POST",url:"/9gag-admin/details",data:{username:b},success:function(a){if(console.log(a.exist),a.exist)var b='<div class="details"><button class="remove-user" data-removeid="'+a.user.username+'">Remove User</button><div class="profilepic"><img src="'+a.user.dp_uri+'"></img></div><div class="name"><a target="_blank" href="/s/'+a.user.username+'">'+a.user.name+'</a></div><div class="username"><a target="_blank" href="/s/'+a.user.username+'">@'+a.user.username+'</a></div><table class="details-table"><tr><td>Email</td><td>'+a.user.email+"</td></tr><tr><td>Gender</td><td>"+a.user.gender+"</td></tr><tr><td>Location</td><td>"+a.user.location+"</td></tr><tr><td>Language</td><td>"+a.user.language+"</td></tr><tr><td>Member Since </td><td>"+a.user.created_at+"</td></tr><tr><td>Total Posts</td><td>"+a.p_count+"</td></tr><tr><td>Total Comments</td><td>"+a.c_count+"</td></tr></table></div>";else var b='<div class="details"><p class="error"> User doesn\'t exist!</p>';request_check=!1,$(b).appendTo(".content .details-wrapper"),$(".remove-user").on("click",removeUser)}}));$(c).appendTo(".content .details-wrapper")}function removeUser(){var a=$(this).attr("data-removeid"),b=confirm("Confirm Delete Action");b&&$.ajax({type:"POST",url:"/9gag-admin/delete",data:{username:a},success:function(a){if($(".details").remove(),a)var b='<div class="details"><p class="error"> Account has been successfully removed!</p>';else var b='<div class="details"><p class="error"> Unable to delete account!</p>';$(b).appendTo(".content .details-wrapper")}})}function removeUserList(a){a.preventDefault();var b=$(this),c=$(this).attr("data-username"),d=confirm("Confirm Delete Action");d&&$.ajax({type:"POST",url:"/9gag-admin/delete",data:{username:c},success:function(a){a&&($(b).siblings().remove(),$(b).removeClass("btn-danger deleteuser").addClass("btn-success").text("User Removed"))}})}function reportCommentRemove(a){a.preventDefault();var b=$(this).attr("data-cid"),c=$(this).attr("data-reportid");flaggedCommentAction(this,b,c,"remove")}function cancelCommentReport(a){a.preventDefault();var b=$(this).attr("data-cid"),c=$(this).attr("data-reportid");flaggedCommentAction(this,b,c,"cancel")}function flaggedCommentAction(a,b,c,d){$.ajax({type:"POST",url:"/9gag-admin/flagged/comments",data:{cid:b,rid:c,action:d},success:function(b){console.log(b),b.status&&$(a).parents("li").html("remove"===d?"<center>Comment has been removed!</center>":"<center>Flagged Report has been removed!</center>")}})}function reportPostRemove(a){a.preventDefault();var b=$(this).attr("data-pid"),c=$(this).attr("data-reportid");flaggedPostAction(this,b,c,"remove")}function cancelPostReport(a){a.preventDefault();var b=$(this).attr("data-pid"),c=$(this).attr("data-reportid");flaggedPostAction(this,b,c,"cancel")}function flaggedPostAction(a,b,c,d){$.ajax({type:"POST",url:"/9gag-admin/flagged/post",data:{pid:b,rid:c,action:d},success:function(b){b.status&&("remove"===d?$(a).parents("li").slideUp("fast").html("<center>Post has been removed!</center>").fadeIn("fast"):$(a).parents("li").slideUp("fast").html("<center>Flagged Report has been removed!</center>").fadeIn("fast"))}})}function reportRepliesRemove(a){a.preventDefault();var b=$(this).attr("data-rid"),c=$(this).attr("data-reportid");flaggedRepliesAction(this,b,c,"remove")}function cancelRepliesReport(a){a.preventDefault();var b=$(this).attr("data-rid"),c=$(this).attr("data-reportid");flaggedRepliesAction(this,b,c,"cancel")}function flaggedRepliesAction(a,b,c,d){$.ajax({type:"POST",url:"/9gag-admin/flagged/replies",data:{cid:b,rid:c,action:d},success:function(b){b.status&&$(a).parents("li").html("remove"===d?"<center>Reply has been removed!</center>":"<center>Flagged Report has been removed!</center>")}})}function removeAdvert(a){a.preventDefault();var b=$(this),c=$(b).attr("data-id"),d=confirm("Confirm Action?");d&&$.ajax({type:"POST",url:"/9gag-admin/adverts/remove",data:{id:c},success:function(a){console.log(a),a&&($(b).unbind("click",removeAdvert),$(b).removeClass("btn-warning remove-advert").addClass("btn-success").text("Advertisement Removed"),setTimeout(function(){location.reload()},3e3))}})}function searchDetails(a){a.preventDefault(),$(".details").remove();var b=$("#search-details-username").val();if(!b.length>0)var c='<div class="details"><p class="error"> Enter Username Before Submission!</p>';else request_check||(request_check=!0,$.ajax({type:"POST",url:"/9gag-admin/details",data:{username:b},success:function(a){if(console.log(a.exist),a.exist)var b='<div class="details"><div class="profilepic"><img src="'+a.user.dp_uri+'"></img></div><div class="name"><a target="_blank" href="/s/'+a.user.username+'">'+a.user.name+'</a></div><div class="username"><a target="_blank" href="/s/'+a.user.username+'">@'+a.user.username+'</a></div><table class="details-table"><tr><td>Email</td><td>'+a.user.email+"</td></tr><tr><td>Gender</td><td>"+a.user.gender+"</td></tr><tr><td>Location</td><td>"+a.user.location+"</td></tr><tr><td>Language</td><td>"+a.user.language+"</td></tr><tr><td>Member Since </td><td>"+a.date+"</td></tr><tr><td>Total Posts</td><td>"+a.p_count+"</td></tr><tr><td>Total Comments</td><td>"+a.c_count+"</td></tr></table></div>";else var b='<div class="details"><p class="error"> User doesn\'t exist!</p>';request_check=!1,$(b).appendTo(".content .details-wrapper")}}));$(c).appendTo(".content .details-wrapper")}function sortUsersList(a){var b=$(".userslist table tr td .username");if(0==$.trim($(this).val())&&$(b).fadeIn("fast"),13!=a.which)for(var c=0;c<b.length;c++){var d=$(b[c]).text();-1!=d.search($.trim($(this).val()))?$(b[c]).parents("tr").fadeIn("fast"):$(b[c]).parents("tr").fadeOut("slow")}else a.preventDefault()}function unsubscribeUser(a){a.preventDefault();var b=$(this);$sub_id=$(this).attr("data-id");var c=confirm("Confirm Action...");c&&$.ajax({type:"POST",url:"/9gag-admin/subscriptions",data:{sub_id:$sub_id},success:function(a){a&&$(b).removeClass("btn-danger unsubscribe").addClass("btn-success").text("Unsubscribed")}})}function hideGlobalNotification(){$($global_notification).fadeOut("slow")}$(".approve-post").on("click",approvePost),$(".adminslist .access .approve").on("click",approveAdmin),$(".adminslist .access .remove").on("click",removeAdmin),$(".adminslist .access .revoke").on("click",removeAdminAccess),$(".banuser").on("click",banUser),$(".unbanuser").on("click",unBanUser),$(".search-delete-form").on("submit",DeleteUser),$(".remove-user").on("click",removeUser),$(".deleteuser").on("click",removeUserList),$(".remove-comment-report").on("click",reportCommentRemove),$(".cancel-comment-report").on("click",cancelCommentReport),$(".remove-post-report").on("click",reportPostRemove),$(".cancel-post-report").on("click",cancelPostReport),$(".remove-reply-report").on("click",reportRepliesRemove),$(".cancel-reply-report").on("click",cancelRepliesReport),$(".remove-advert").on("click",removeAdvert),$(".search-details-form").on("submit",searchDetails),$("#sort-users-list").on("keydown",sortUsersList),$(".unsubscribe").on("click",unsubscribeUser);var $global_close=$(".global .close"),$global_notification=$(".global");$($global_close).on("click",hideGlobalNotification),$(".global").length&&setTimeout(function(){$(".global").fadeOut("slow")},3e3);var request_check=!1;